{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useCallback, useMemo, useState } from \"react\";\nimport { useCurrentLoginUser } from \"./useCurrentLoginUser\";\nimport { useMessage } from \"./useMessage\";\nexport const useFollow = () => {\n  _s();\n\n  const {\n    showMessage\n  } = useMessage();\n  const [followState, setFollowState] = useState(false);\n  const {\n    loginUser,\n    setLoginUser\n  } = useCurrentLoginUser();\n  const getMyFollow = useMemo(() => {\n    axios.get(`http://localhost:8080/api/login/getMyFollow/${loginUser.email}`, {\n      headers: {\n        Authorization: loginUser.token\n      }\n    }).then(res => {\n      setLoginUser({ ...loginUser,\n        follow: res.data.followResource,\n        follower: res.data.followerResource\n      });\n    });\n  }, []);\n  const insertFollow = useCallback(followemail => {\n    setFollowState(true);\n    axios.post(\"http://localhost:8080/api/home/insertFollow\", {\n      email: loginUser.email,\n      followemail: followemail\n    }, {\n      headers: {\n        Authorization: loginUser.token\n      }\n    }).then(res => {\n      showMessage({\n        title: res.data,\n        status: \"success\"\n      });\n      setFollowState(false);\n    }).catch(res => {\n      showMessage({\n        title: res.data,\n        status: \"error\"\n      });\n      setFollowState(false);\n    });\n  }, []);\n  const deleteFollow = useCallback(followemail => {\n    setFollowState(true);\n    axios.delete(`http://localhost:8080/api/home/deleteFollow/${loginUser.email}/${followemail}`, {\n      headers: {\n        Authorization: loginUser.token\n      }\n    }).then(res => {\n      showMessage({\n        title: res.data,\n        status: \"success\"\n      });\n      setFollowState(false);\n    }).catch(res => {\n      showMessage({\n        title: res.data,\n        status: \"error\"\n      });\n      setFollowState(false);\n    });\n  }, []);\n  return {\n    followState,\n    getMyFollow,\n    insertFollow,\n    deleteFollow\n  };\n};\n\n_s(useFollow, \"9xzwMwcVFe5qiHST0RcGvZz2z/0=\", false, function () {\n  return [useMessage, useCurrentLoginUser];\n});","map":{"version":3,"sources":["C:/Users/yuma/Desktop/フロント/tweet-app/src/hooks/useFollow.tsx"],"names":["axios","useCallback","useMemo","useState","useCurrentLoginUser","useMessage","useFollow","showMessage","followState","setFollowState","loginUser","setLoginUser","getMyFollow","get","email","headers","Authorization","token","then","res","follow","data","followResource","follower","followerResource","insertFollow","followemail","post","title","status","catch","deleteFollow","delete"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useCallback, useMemo, useState } from \"react\";\r\nimport { useCurrentLoginUser } from \"./useCurrentLoginUser\";\r\nimport { useMessage } from \"./useMessage\";\r\nimport { FollowListType } from \"../types/followListType\";\r\n\r\nexport const useFollow = () => {\r\n    const {showMessage} = useMessage();\r\n    const [followState, setFollowState] = useState(false);\r\n    const {loginUser, setLoginUser} = useCurrentLoginUser();\r\n    const getMyFollow = useMemo(() => {\r\n        axios.get<FollowListType>(`http://localhost:8080/api/login/getMyFollow/${loginUser.email}`, {headers: {Authorization: loginUser.token as string}})\r\n        .then((res) => {\r\n            setLoginUser({...loginUser, follow: res.data.followResource, follower: res.data.followerResource});\r\n        })\r\n    }, []);\r\n    const insertFollow = useCallback((followemail?: string) => {\r\n        setFollowState(true);\r\n        axios.post(\"http://localhost:8080/api/home/insertFollow\", {email: loginUser.email, followemail: followemail}, {headers: {Authorization: loginUser.token as string}})\r\n        .then((res) => {\r\n            showMessage({title: res.data as string, status: \"success\"});\r\n            setFollowState(false);\r\n        })\r\n        .catch((res) => {\r\n            showMessage({title: res.data as string, status: \"error\"});\r\n            setFollowState(false);\r\n        });\r\n    }, []);\r\n    const deleteFollow = useCallback((followemail?: string) => {\r\n        setFollowState(true);\r\n        axios.delete(`http://localhost:8080/api/home/deleteFollow/${loginUser.email}/${followemail}`, {headers: {Authorization: loginUser.token as string}})\r\n        .then((res) => {\r\n            showMessage({title: res.data as string, status: \"success\"});\r\n            setFollowState(false);\r\n        })\r\n        .catch((res) => {\r\n            showMessage({title: res.data as string, status: \"error\"});\r\n            setFollowState(false);\r\n        });\r\n    }, []);\r\n\r\n    return {followState, getMyFollow, insertFollow, deleteFollow};\r\n};"]},"metadata":{},"sourceType":"module"}